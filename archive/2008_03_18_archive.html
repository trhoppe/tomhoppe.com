<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>TomHoppe.com: Mar 18, 2008</title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="MSSmartTagsPreventParsing" content="true" />
<meta name="generator" content="Blogger" />
<link rel="alternate" type="application/atom+xml" title="TomHoppe.com - Atom" href="http://www.tomhoppe.com/atom.xml" />
<link rel="alternate" type="application/rss+xml" title="TomHoppe.com - RSS" href="http://www.tomhoppe.com/rss.xml" />
<link rel="service.post" type="application/atom+xml" title="TomHoppe.com - Atom" href="http://www.blogger.com/feeds/6064498188306872783/posts/default" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.blogger.com/rsd.g?blogID=6064498188306872783" />
<style type="text/css">
@import url("http://www.blogger.com/css/blog_controls.css");
@import url("http://www.blogger.com/dyn-css/authorization.css?targetBlogID=6064498188306872783");
</style>
<script type="text/javascript" src="http://www.blogger.com/js/backlink.js"></script>
<script type="text/javascript" src="http://www.blogger.com/js/backlink_control.js"></script>
<script type="text/javascript">var BL_backlinkURL = "http://www.blogger.com/dyn-js/backlink_count.js";var BL_blogId = "6064498188306872783";</script>


    <!-- used to create popup larger image -->
    <link rel="stylesheet" href="http://www.tomhoppe.com/css/thickbox.css" type="text/css"/>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.tomhoppe.com/js/thickbox.js"></script>
    <!-- used to create popup larger image -->
    
    <link rel="stylesheet" type="text/css" href="http://www.tomhoppe.com/css/siteStyles.css" />
    <link rel="stylesheet" type="text/css" href="http://www.tomhoppe.com/css/blogStyles.css" />
    
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
	
</head>

<body>
<div id="mainCentering">
<!-- START OF TOP SECTION -->
<div id="borderTop" class="clearfix">
	<img src="http://www.tomhoppe.com/images/cornerTL.gif" width="13" height="18" alt="" border="0" class="cornerL" />
	<img src="http://www.tomhoppe.com/images/cornerTR.gif" width="13" height="18" alt="" border="0" class="cornerR" />
</div>

<div id="border1"><div id="border2"><div id="border3">
<div id="mainContainer">
	<div id="topBar" class="clearfix">
		<h1>
			<a href="http://www.tomhoppe.com">tomhoppe.com<br /></a>
		</h1>
		<div class="siteDesc">
			Racing, Web Development, Photography, and Beer...Stuff that matters. 
		</div>
	</div>    
<!-- END OF TOP SECTION --> 


<!-- START OF ACTUAL BLOG -->

<div id="content" class="clearfix">
	
	<!-- Begin #main -->
	<div id="main"><div id="main2">

	

    
		<h2 class="date-header">Tuesday, March 18, 2008</h2>
	

	<!-- Begin .post -->
	<div class="post"><a name="8232425268208005748"></a>
		
			<h3 class="post-title">
			<a href="http://www.tomhoppe.com/2008/03/adddomloadevent.html">addDomLoadEvent</a>
			</h3>
		

		<div class="post-body">
            <div>
                <div style="clear:both;"></div><p>Using window.onload for Javascript creates a crappy UI, as it waits for the entire page, including all CSS, JS, and images to load. I avoided as much as possible, but for some things in the day job, we needed to use it. The best example being that we only had access to JS in the head of the page, but needed to immediately client side add some code to the bottom of the page. </p> <p>For this, we used addLoadEvent and waited till everything was done. Having been fed up with this, I did some a big of searching and found a solution from <a href="http://www.thefutureoftheweb.com/blog/adddomloadevent" target="_blank">The Future of the Web, by Jesse Skinner</a>. Jesse's script puts together a cross-browser way to wait for just the DOM to load, instead of all the images and text</p><p>This is easy for FF, Safari 3 Beta, and Opera, but a pain for IE and Safari 2. I changed his script slightly to be compatible with https and came up with the below code. Thanks Jesse!</p>. 
<pre class="codeBlock">
addDOMLoadEvent = (function(){
    // create event function stack
    var load_events = [],safari_timer,done,exec,script;
 
 var init = function () {
            done = true;

            // kill the timer
            clearInterval(safari_timer);

            // execute each function in the stack in the order they were added
            while (exec = load_events.shift())
                exec();

            if (script) script.onreadystatechange = '';
        }

    return function (func) {
        // if the init function was already ran, just run this function now and stop
        if (done) return func();

        if (!load_events[0]) {
            // for Mozilla/Opera9
            if (document.addEventListener)
                document.addEventListener("DOMContentLoaded", init, false);
    
   /*@cc_on @*/
   /*@if (@_win32)
   var proto = "src='javascript:void(0)'";
   if (location.protocol == "https:") proto = "src=//0";
   document.write("&lt;scr"+"ipt id=__ie_onload defer " + proto + "><\/scr"+"ipt>");
   var script = document.getElementById("__ie_onload");
   script.onreadystatechange = function() {
    if (this.readyState == "complete") {
     init()
    }
   };
   /*@end @*/

            if (/WebKit/i.test(navigator.userAgent)) { // sniff
                safari_timer = setInterval(function() {
                    if (/loaded|complete/.test(document.readyState))
                        init(); // call the onload handler
                }, 10);
            }

            old_onload = window.onload;
            window.onload = function() {
                init();
                if (old_onload) old_onload();
            };
        }

        load_events.push(func);
    }
})();
</pre><div style="clear:both; padding-bottom:0.25em"></div>
            </div>
		</div>

		<p class="post-footer">
			<em>posted by Tom Hoppe at 5:45 PM</em>
			
                
                    <a class="comment-link" href="http://www.blogger.com/comment.g?blogID=6064498188306872783&postID=8232425268208005748&isPopup=true" onclick="window.open('http://www.blogger.com/comment.g?blogID=6064498188306872783&postID=8232425268208005748&isPopup=true', 'bloggerPopup', 'toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=0,resizable=1,width=400,height=450');return false;">0 comments</a>
                
                
                    <a class="comment-link" href="http://www.tomhoppe.com/2008/03/adddomloadevent.html#links">links to this post</a>
                
			  
            
		</p>

	</div>
	<!-- End .post -->
    
  	<!-- Begin #comments -->
	

  	<!-- End #comments -->

	

    

	<!-- Begin .post -->
	<div class="post"><a name="2088005770817342944"></a>
		
			<h3 class="post-title">
			<a href="http://www.tomhoppe.com/2008/03/drag-and-drop-javascript.html">Drag and drop Javascript</a>
			</h3>
		

		<div class="post-body">
            <div>
                <div style="clear:both;"></div><p>I found a great <a target="_blank" href="http://www.quirksmode.org/js/dragdrop.html">overview of drag and drop by Quirksmode today</a>, and I wanted to make sure I didn't lose it or forget about it. Its a great explanation of drag and drop through JS with code examples, demos, and exactly how it does what. I only had a few minutes to look through it but it looks awesome.</p><div style="clear:both; padding-bottom:0.25em"></div>
            </div>
		</div>

		<p class="post-footer">
			<em>posted by Tom Hoppe at 5:38 PM</em>
			
                
                    <a class="comment-link" href="http://www.blogger.com/comment.g?blogID=6064498188306872783&postID=2088005770817342944&isPopup=true" onclick="window.open('http://www.blogger.com/comment.g?blogID=6064498188306872783&postID=2088005770817342944&isPopup=true', 'bloggerPopup', 'toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=0,resizable=1,width=400,height=450');return false;">0 comments</a>
                
                
                    <a class="comment-link" href="http://www.tomhoppe.com/2008/03/drag-and-drop-javascript.html#links">links to this post</a>
                
			  
            
		</p>

	</div>
	<!-- End .post -->
    
  	<!-- Begin #comments -->
	

  	<!-- End #comments -->

	

    

	<!-- Begin .post -->
	<div class="post"><a name="8109529223572213975"></a>
		
			<h3 class="post-title">
			<a href="http://www.tomhoppe.com/2008/03/dynamically-adding-css-through.html">Dynamically adding CSS through Javascript</a>
			</h3>
		

		<div class="post-body">
            <div>
                <div style="clear:both;"></div><p>I found this little tip by accident while surfing the web to solve a different problem. Thanks to the <a href="http://yuiblog.com/blog/2007/06/07/style/">Yahoo User Interface Blog</a> for the solution! </p>

<p>When adding in a piece of HTML dynamically, what do you do with the styles for it? In the past, I usually included the styles in a global or page specific stylesheet where I knew the HTML would show up. The current snippet I was writing through, was going to add some code in random places throughout a 4000+ page website as well as some partner sites, so it needed to come with its own CSS. FF allows you nicely to just embed a &lt;style&gt; tag anywhere in a page with your styles and be done with it. IE and Safari, not so much. </p>

<p>What I found on the <a href="http://yuiblog.com/blog/2007/06/07/style/">YUI Blog</a> was the cssText property of the stylesheet property. This allows for a cross browser way for us to insert a string of css into a style element in the head. Beautiful! Just create your css as a string and pass it into the addCSS function below.</p> 

<pre class="codeBlock">
function addCss(cssCode) {
var styleElement = document.createElement("style");
  styleElement.type = "text/css";
  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = cssCode;
  } else {
    styleElement.appendChild(document.createTextNode(cssCode));
  }
  document.getElementsByTagName("head")[0].appendChild(styleElement);
}
</pre><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://www.tomhoppe.com/labels/CSS.html">CSS</a>, <a rel='tag' href="http://www.tomhoppe.com/labels/Javascript.html">Javascript</a></p>
            </div>
		</div>

		<p class="post-footer">
			<em>posted by Tom Hoppe at 5:12 PM</em>
			
                
                    <a class="comment-link" href="http://www.blogger.com/comment.g?blogID=6064498188306872783&postID=8109529223572213975&isPopup=true" onclick="window.open('http://www.blogger.com/comment.g?blogID=6064498188306872783&postID=8109529223572213975&isPopup=true', 'bloggerPopup', 'toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=0,resizable=1,width=400,height=450');return false;">0 comments</a>
                
                
                    <a class="comment-link" href="http://www.tomhoppe.com/2008/03/dynamically-adding-css-through.html#links">links to this post</a>
                
			  
            
		</p>

	</div>
	<!-- End .post -->
    
  	<!-- Begin #comments -->
	

  	<!-- End #comments -->

	
	</div>
	</div>

	<!-- End #main -->


	<!-- Begin #sidebar -->
	<div id="sidebar"><div id="sidebar2">
   
	<h2 class="sidebar-title">Previous Posts</h2>
    	<ul id="recently">
		    
        	<li><a href="http://www.tomhoppe.com/2008/07/granite.html">Granite!</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/07/kitchen-continues.html">The Kitchen continues</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/07/kitchen-part-deux.html">Kitchen Part Deux</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/07/road-atlanta-win.html">Road Atlanta Win</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/07/laptop-drive-of-shame.html">The Laptop &quot;Drive of Shame&quot;</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/07/finally-worked-on-race-car.html">Finally worked on the race car</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/07/never-fear-iphone-is-here.html">Never fear, the iPhone is here</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/07/more-4-wheeling.html">More 4 Wheeling!</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/06/better-firefox-bookmarking-toolbar.html">Better Firefox bookmarks toolbar</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/06/dogs-and-new-lens.html">Dogs and new lens</a></li>
		    
		</ul>
    
    
	<h2 class="sidebar-title">Archives</h2>
    	<ul class="archive-list">
	  		
	    	<li><a href="http://www.tomhoppe.com/2007_07_17_archive.html">Jul 17, 2007</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_02_11_archive.html">Feb 11, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_03_04_archive.html">Mar 4, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_03_05_archive.html">Mar 5, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_03_07_archive.html">Mar 7, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_03_10_archive.html">Mar 10, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_03_17_archive.html">Mar 17, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_03_18_archive.html">Mar 18, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_03_22_archive.html">Mar 22, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_04_15_archive.html">Apr 15, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_04_17_archive.html">Apr 17, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_05_02_archive.html">May 2, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_05_21_archive.html">May 21, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_06_03_archive.html">Jun 3, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_06_09_archive.html">Jun 9, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_06_10_archive.html">Jun 10, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_06_23_archive.html">Jun 23, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_06_29_archive.html">Jun 29, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_06_30_archive.html">Jun 30, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_07_07_archive.html">Jul 7, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_07_11_archive.html">Jul 11, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_07_12_archive.html">Jul 12, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_07_14_archive.html">Jul 14, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_07_21_archive.html">Jul 21, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_07_24_archive.html">Jul 24, 2008</a></li>
			
	    	<li><a href="http://www.tomhoppe.com/2008_07_29_archive.html">Jul 29, 2008</a></li>
			
		</ul>
	
  
	<h2 class="sidebar-title">Categories</h2>
   	<ul>
    	<li><a href="http://www.tomhoppe.com/labels/General.html">General</a></li>
        <li><a href="http://www.tomhoppe.com/labels/Racing.html">Racing</a></li>
        <li><a href="http://www.tomhoppe.com/labels/Javascript.html">Javascript</a></li>
        <li><a href="http://www.tomhoppe.com/labels/CSS.html">CSS</a></li>
    </ul>

	<p id="powered-by" style="padding:0 0 10px 0;"><a href="http://www.blogger.com"><img src="http://buttons.blogger.com/bloggerbutton1.gif" alt="Powered by Blogger" border="0" /></a></p>

	</div></div>
<!-- End #sidebar -->
	
</div>
	
<!-- END OF BLOG -->
</div>
</div></div></div>

<!-- START OF BOTTOM SECTION -->	
<div id="borderBottom" class="clearfix">
	<img src="http://www.tomhoppe.com/images/cornerBL.gif" width="12" height="22" alt="" border="0" class="cornerL" />
	<img src="http://www.tomhoppe.com/images/cornerBR.gif" width="12" height="22" alt="" border="0" class="cornerR" />
</div>
<!-- END OF BOTTOM SECTION -->
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4655438-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</body>

</html>