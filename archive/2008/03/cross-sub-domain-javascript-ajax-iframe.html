<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>TomHoppe.com: Cross Sub Domain Javascript (Ajax, Iframe, etc)</title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="MSSmartTagsPreventParsing" content="true" />
<meta name="generator" content="Blogger" />
<link rel="icon" type="image/vnd.microsoft.icon" href="http://www.blogger.com/favicon.ico"/>
<link rel="alternate" type="application/atom+xml" title="TomHoppe.com - Atom" href="http://www.tomhoppe.com/atom.xml" />
<link rel="alternate" type="application/rss+xml" title="TomHoppe.com - RSS" href="http://www.tomhoppe.com/rss.xml" />
<link rel="service.post" type="application/atom+xml" title="TomHoppe.com - Atom" href="http://www.blogger.com/feeds/6064498188306872783/posts/default" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.blogger.com/rsd.g?blogID=6064498188306872783" />
<link rel="alternate" type="application/atom+xml" title="TomHoppe.com - Atom" href="http://www.blogger.com/feeds/6064498188306872783/2368817481528045158/comments/default" />
 <link rel="stylesheet" type="text/css" href="http://www.blogger.com/css/blog_controls.css"/> <link rel="stylesheet" type="text/css" href="http://www.blogger.com/dyn-css/authorization.css?targetBlogID=6064498188306872783&zx=e098ca30-f1ca-4a01-9164-7b82b52bbebe"/>

    <!-- used to create popup larger image -->
    <link rel="stylesheet" href="http://www.tomhoppe.com/css/thickbox.css" type="text/css"/>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.tomhoppe.com/js/thickbox.js"></script>
    <!-- used to create popup larger image -->
    
    <link rel="stylesheet" type="text/css" href="http://www.tomhoppe.com/css/siteStyles.css" />
    <link rel="stylesheet" type="text/css" href="http://www.tomhoppe.com/css/blogStyles.css" />
    
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
	
</head>

<body>
<div id="mainCentering">
<!-- START OF TOP SECTION -->
<div id="borderTop" class="clearfix">
	<img src="http://www.tomhoppe.com/images/cornerTL.gif" width="13" height="18" alt="" border="0" class="cornerL" />
	<img src="http://www.tomhoppe.com/images/cornerTR.gif" width="13" height="18" alt="" border="0" class="cornerR" />
</div>

<div id="border1"><div id="border2"><div id="border3">
<div id="mainContainer">
	<div id="topBar" class="clearfix">
		<h1>
			<a href="http://www.tomhoppe.com">tomhoppe.com<br /></a>
		</h1>
		<div class="siteDesc">
			Racing, Web Development, Photography, and Beer...Stuff that matters. 
		</div>
	</div>    
<!-- END OF TOP SECTION --> 


<!-- START OF ACTUAL BLOG -->

<div id="content" class="clearfix">
	
	<!-- Begin #main -->
	<div id="main"><div id="main2">

	

    
		<h2 class="date-header">Monday, March 10, 2008</h2>
	

	<!-- Begin .post -->
	<div class="post"><a name="2368817481528045158"></a>
		
			<h3 class="post-title">
			<a href="http://www.tomhoppe.com/2008/03/cross-sub-domain-javascript-ajax-iframe.html">Cross Sub Domain Javascript (Ajax, Iframe, etc)</a>
			</h3>
		

		<div class="post-body">
            <div>
                <div style="clear:both;"></div><p>So we've been dealing with an issue at work with cross sub domain JS. Basically, JS believes that even a subdomain such as img.yourdomain.com is a different domain from www.yourdomain.com. Because of that, AJAX across pages from those two subdomains will not work. Also if you have an iframe from one to another, you will not be able to refence JS vars or functions back and forth.</p>

<p>After a good bit of digging, I discovered a way around this. This involves setting up an iframe html on one domain and then calling that iframe from the page on the other subdomain. You have to set the document.domain to the same thing on both the parent page and its iframe, in order for them to talk to each other. </p>

<pre class="codeBlock">document.domain = "yourdomain.com"</pre>

<p>Once that is set, the two pages now think they are on the same domain. </p>

<p>For example, for pulling in text, setup your page on www.yourdomain.com and set document.domain to yourdomain.com. If you are trying to pull in an html page using Ajax from img.yourdomain.com, setup a page that, will become the iframe, to do the ajax pull. After that pull is complete set the document.domain to yourdomain.com. In your page on www. create an iframe which has the src set to your page on img. Since document.domain is set, any functions on the parent page are available to be called via the iframe. Lets say you want to put your newly "ajaxed" html into a div on the parent page, you can do that via "parent.getElementById('yourDivName').innerHTML = Response.Text".</p>

<p>If you are pulling in XML, you can setup the page/iframe relationship the same as above. That iframe will make the ajax call to the XML on img.yourdomain.com and do something with it, lets say turn it into an array. Once that is completed, set the document.domain on the iframe page. At this point, the parent page can access that array on its iframe via "iframeName.arrayName". Alternatively you can have an array read on the parent page for this information and pass it to the parent from the iframe via "parent.arrayName = iframeArray".</p><div style="clear:both; padding-bottom:0.25em"></div><p class="blogger-labels">Labels: <a rel='tag' href="http://www.tomhoppe.com/labels/All.html">All</a>, <a rel='tag' href="http://www.tomhoppe.com/labels/Javascript.html">Javascript</a></p>
            </div>
		</div>

		<p class="post-footer">
			<em>posted by Tom Hoppe at 4:07 PM</em>
			  
            
		</p>

	</div>
	<!-- End .post -->
    
  	<!-- Begin #comments -->
	
	<div id="comments">

	<a name="comments"></a>
        <h4>5 Comments:</h4>
        <dl id="comments-block">
      
      <dt class="comment-poster" id="c911194584292714074"><a name="c911194584292714074"></a>
        <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> said...
      </dt>
      <dd class="comment-body">

        <p>Thanks! Extremely useful information! If this really works, I owe you much.(I'm after about 1-2 hours of trying and failing with this damn subdomain thing)<BR/>Going to try it right now.</p>
      </dd>
      <dd class="comment-timestamp"><a href="#911194584292714074" title="comment permalink">July 2, 2008 4:43 PM</a>
	  <span class="item-control blog-admin pid-1029833565"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=6064498188306872783&postID=911194584292714074" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c6787531497342845467"><a name="c6787531497342845467"></a>
        <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Anonymous</span> said...
      </dt>
      <dd class="comment-body">

        <p>This sounds great, however some more details would be appreciated, i.e. more details on the implementation... creating the iframe.. then js to access the iframe.<BR/><BR/>Thanks You!</p>
      </dd>
      <dd class="comment-timestamp"><a href="#6787531497342845467" title="comment permalink">July 21, 2008 2:51 PM</a>
	  <span class="item-control blog-admin pid-1029833565"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=6064498188306872783&postID=6787531497342845467" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c3003810703554265211"><a name="c3003810703554265211"></a>
        <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<span class="anon-comment-author">Greg Nacu</span> said...
      </dt>
      <dd class="comment-body">

        <p>The problem is that it _doesn't_ work.  At least, it doesn't work in Safari.  I haven't tested in FireFox yet, but I'm not confident.  <BR/><BR/>If this only works in IE, then I think it was important that this is mentioned.<BR/><BR/>Greg.</p>
      </dd>
      <dd class="comment-timestamp"><a href="#3003810703554265211" title="comment permalink">October 16, 2008 10:48 AM</a>
	  <span class="item-control blog-admin pid-1029833565"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=6064498188306872783&postID=3003810703554265211" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c7441566893679116613"><a name="c7441566893679116613"></a>
        <span style="line-height:16px" class="comment-icon anon-comment-icon"><img src="http://www.blogger.com/img/anon16-rounded.gif" alt="Anonymous" style="display:inline;" /></span>&nbsp;<a href="nacu.ca" rel="nofollow">Greg Nacu</a> said...
      </dt>
      <dd class="comment-body">

        <p>Oops!  Okay, I'm wrong.  It DOES work! And work it does!  Holy Crap.  What a great solution.  It works in Safari 3, and FireFox 3, but it is critically important that you set document.domain in both DOM's that you want to have talking to each other. <BR/><BR/>What I was trying was the first DOM was src'd at blah.site.com and the iframe was at subdomain.blah.site.com, and I was only setting document.domain in the DOM of the iframe to try to match the src'd URL of the main page.  This does not work.  Even though the main page is src'd at blah.site.com you still have to explicitly set document.domain='blah.site.com' or it won't work.<BR/><BR/>Yay! <BR/><BR/>Greg.</p>
      </dd>
      <dd class="comment-timestamp"><a href="#7441566893679116613" title="comment permalink">October 16, 2008 11:12 AM</a>
	  <span class="item-control blog-admin pid-1029833565"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=6064498188306872783&postID=7441566893679116613" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
      <dt class="comment-poster" id="c7379359011970873270"><a name="c7379359011970873270"></a>
        <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://www.blogger.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/01850398067859230454" rel="nofollow">mikosan</a> said...
      </dt>
      <dd class="comment-body">

        <p>Hi,<BR/><BR/>after a couple of hours of try/fail maddness I would like to ask for more details / implementation example <BR/><BR/>thanks</p>
      </dd>
      <dd class="comment-timestamp"><a href="#7379359011970873270" title="comment permalink">January 23, 2009 2:53 AM</a>
	  <span class="item-control blog-admin pid-936436729"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=6064498188306872783&postID=7379359011970873270" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
	  </dd>
      
    </dl>
	
    <p class="comment-timestamp">
    	<a class="comment-link" href="https://www.blogger.com/comment.g?blogID=6064498188306872783&postID=2368817481528045158&isPopup=true" onclick="window.open(this.href, 'bloggerPopup', 'toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=0,resizable=1,width=400,height=450');return false;">Post a Comment</a>
    </p>
    	    

    


	<p class="comment-timestamp">
	<a href="http://www.tomhoppe.com/">&lt;&lt; Home</a>
    </p>
    </div>

	

  	<!-- End #comments -->

	
	</div>
	</div>

	<!-- End #main -->


	<!-- Begin #sidebar -->
	<div id="sidebar"><div id="sidebar2">
   
	<h2 class="sidebar-title">Previous Posts</h2>
    	<ul id="recently">
		    
        	<li><a href="http://www.tomhoppe.com/2008/03/cross-browser-self-closing-popup-window.html">Cross browser, self closing popup window</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/03/house-update.html">House Update....</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/03/race-car-update.html">Race Car Update</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/03/so-now-that-ive-got-blog.html">So now that I&#39;ve got a &quot;blog&quot;</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/02/add-class-name-to-div-id.html">Add class name to div id</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2008/02/snipper-for-grabbing-filename-from.html">Grab filename from window location</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2007/07/snippet-for-assigning-childs-href-to.html">Assign the child&#39;s href to the parent&#39;s onclick</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2007/07/snippet-for-parsing-querystring-through.html">Querystring parsing</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2007/07/snippet-for-finding-something-in-string.html">Find something in a string</a></li>
		    
        	<li><a href="http://www.tomhoppe.com/2007/07/snippet-for-changing-class-of-object.html">Font sizer for a content well</a></li>
		    
            <li><a href="http://www.tomhoppe.com/labels/All.html">All Previous</a></li>
		</ul>
        
    <h2 class="sidebar-title">Categories</h2>
   	<ul>
    	<li><a href="http://www.tomhoppe.com/labels/All.html">All</a></li>
        <li><a href="http://www.tomhoppe.com/labels/CSS.html">CSS</a></li>
    	<li><a href="http://www.tomhoppe.com/labels/General.html">General (Misc)</a></li>
        <li><a href="http://www.tomhoppe.com/labels/Javascript.html">Javascript</a></li>
        <li><a href="http://www.tomhoppe.com/labels/Jeep.html">Jeep</a></li>
        <li><a href="http://www.tomhoppe.com/labels/Pictures.html">Pictures</a></li>
        <li><a href="http://www.tomhoppe.com/labels/Racing.html">Racing</a></li>
    </ul>
    
    
  
	

	<p id="powered-by" style="padding:0 0 10px 0;"><a href="http://www.blogger.com"><img src="http://buttons.blogger.com/bloggerbutton1.gif" alt="Powered by Blogger" border="0" /></a></p>

	</div></div>
<!-- End #sidebar -->
	
</div>
<div style="clear:both;"></div>
<!-- END OF BLOG -->
</div>
</div></div></div>

<!-- START OF BOTTOM SECTION -->	
<div id="borderBottom" class="clearfix">
	<img src="http://www.tomhoppe.com/images/cornerBL.gif" width="12" height="22" alt="" border="0" class="cornerL" />
	<img src="http://www.tomhoppe.com/images/cornerBR.gif" width="12" height="22" alt="" border="0" class="cornerR" />
</div>
<!-- END OF BOTTOM SECTION -->
</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4655438-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</body>

</html>